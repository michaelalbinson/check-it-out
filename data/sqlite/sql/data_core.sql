PRAGMA foreign_keys = ON;

DROP TABLE IF EXISTS `CONGRESSIONAL_SESSION`{
    `NUMBER` INT PRIMARY KEY,
    `PRESIDENT` VARCHAR(100) NOT NULL,
    `START_DATE` INT NOT NULL,
    `END_DATE` INT NOT NULL
};

DROP TABLE IF EXISTS `BILL_KEYWORDS`;

CREATE TABLE `BILL_KEYWORDS`{
    `KEYWORD` VARCHAR(100) NOT NULL,
    `BILL_ID` VARCHAR(100) NOT NULL,
    `WEIGHT` INT DEFAULT 0,
    UNIQUE(KEYWORD, BILL_ID),
    FOREIGN KEY(BILL_ID) REFERENCES BILLS(ID)
};

DROP TABLE IF EXISTS `BILL`;

CREATE TABLE `BILL` {
    `ID` VARCHAR(100) PRIMARY KEY,
    `TITLE` VARCHAR(500) DEFAULT NULL,
    `CONGRESS_SESSION` INT DEFAULT 0,
    `INTRODUCED_DATE` INT DEFAULT 0,
    `CONGRESS_URL` VARCHAR(100) DEFAULT NULL,
    `BILL_URL` VARCHAR(100) DEFAULT NULL,
    `ACTIVE` BOOLEAN DEFAULT FALSE,
    `BILL_ID` VARCHAR(100) PRIMARY KEY,
    `ENACTED` BOOLEAN DEFAULT FALSE,
    `VETOED` BOOLEAN DEFAULT FALSE,
    `SUMMARY` VARCHAR(500) DEFAULT NULL,
    `LATEST_MAJOR_ACTION` VARCHAR(500) DEFAULT NULL,
    FOREIGN KEY(CONGRESS_SESSION) REFERENCES CONGRESSIONAL_SESSION(NUMBER)
};

DROP TABLE IF EXISTS `MEMBER`;

CREATE TABLE MEMBER{
    `ID` VARCHAR(50) PRIMARY KEY,
    `FIRST_NAME` VARCHAR(100) NOT NULL,
    `MIDDLE_NAME` VARCHAR(100) DEFAULT NULL,
    `LAST_NAME` VARCHAR(100) NOT NULL,
    `GENDER` VARCHAR(10) NOT NULL,
    `PARTY` VARCHAR(1) NOT NULL,
    `LEADERSHIP_ROLE` VARCHAR(100) DEFAULT NULL,
    `TWITTER_ACCOUNT` VARCHAR(100) DEFAULT NULL,
    `FACEBOOK_ACCOUNT` VARCHAR(100) DEFAULT NULL,
    `YOUTUBE_ACCOUNT` VARCHAR(100) DEFAULT NULL,
    `CSPAN_ID` VARCHAR(100) DEFAULT NULL,
    `ICPSR_ID` VARCHAR(100) DEFAULT NULL,
    `CRP_ID` VARCHAR(100) DEFAULT NULL,
    `FEC_CANDIDATE_ID` DEFAULT NULL,
    `IN_OFFICE` BOOLEAN DEFAULT TRUE,
    `SENIORITY` INT DEFAULT 0,
    `TOTAL_VOTES` INT DEFAULT 0,
    `MISSED_VOTES` INT DEFAULT 0,
    `TOTAL_PRESENT` INT DEFAULT 0,
    `OFFICE` VARCHAR(100) DEFAULT NULL,
    `PHONE` INT DEFAULT NULL,
    `FAX` INT DEFAULT NULL,
    `STATE` VARCHAR(100) NOT NULL,
    `DISTRICT` VARCHAR(100) DEFAULT NULL,
    `AT_LARGE` BOOLEAN DEFAULT FALSE,
    `SENATE_CLASS` INT DEFAULT 1,
    `STATE_RANK` VARCHAR(100) DEFAULT NULL,
    `MISSED_VOTES_PCT` FLOAT DEFAULT 0.0,
    `VOTES_WITH_PARTY_PCT` FLOAT DEFAULT 0.0,
    `TITLE` VARCHAR(10) NOT NULL,
    `SESSION` INT NOT NULL,
    FOREIGN KEY(SESSION) REFERENCES CONGRESSIONAL_SESSION(NUMBER)
};

DROP TABLE IF EXISTS `COSPONSOR`;

CREATE TABLE `COSPONSOR`{
    `MEMBER_ID` VARCHAR(100) NOT NULL,
    `BILL_ID` VARCHAR(100) NOT NULL,
    UNIQUE(MEMBER_ID, BILL_ID),
    FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(ID),
    FOREIGN KEY(BILL_ID) REFERENCES BILL(ID)
};

DROP TABLE IF EXISTS  `COMMITTEE_MEMBERSHIP`;

CREATE TABLE `COMMITTEE_MEMBERSHIP`{
    `MEMBER_ID` VARCHAR(100) NOT NULL,
    `COMMITTEE_ID` VARCHAR(100) NOT NULL,
    `SESSION` INT NOT NULL,
    FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(ID),
    FOREIGN KEY(COMMITEE_ID) REFERENCES COMMITTEE(ID),
    FOREIGN KEY(SESSION) REFERENCES CONGRESSIONAL_SESSION(NUMBER),
    UNIQUE(MEMBER_ID, COMMITEE_ID)
};

DROP TABLE IF EXISTS `COMMITTEE`;

CREATE TABLE `COMMITTEE`{
    `NAME` VARCHAR(100) NOT NULL,
    `ID` VARCHAR(10) NOT NULL,
    `YEAR_CREATED` INT DEFAULT 0,
    `PURPOSE` VARCHAR(500) DEFAULT NULL
};